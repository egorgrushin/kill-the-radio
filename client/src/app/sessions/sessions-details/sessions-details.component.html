<div class="sessions-details c-page">
	<div class="c-page__wrapper">
		<h2 class="c-page__header">
			<span *ngIf="!loadingState.isLoading; else loadingTRef">
				Сессия: <strong>(conversationId:{{session?.conversationId}})</strong>
			</span>
			<ng-template #loadingTRef>Загрузка...</ng-template>
		</h2>
		<div *ngIf="loadingState.error" class="c-error">{{loadingState.error}}</div>
		<div class="c-chat">
			<div *ngFor="let activity of activities; trackBy: trackByProp()"
				 [ngClass]="{'c-chat__item--right': !activity.isBot}"
				 class="c-chat__item">
				<div class="c-chat__item-header">
					<p class="c-chat__item-sender">
						{{activity.activity.from.name}} ({{activity.activity.from.id}})
					</p>
					<time class="c-chat__item-datetime">{{activity.activity.timestamp | date: 'medium'}}</time>
				</div>
				<div class="c-chat__item-body">
					<p>{{activity.activity.text}}</p>
					<div *ngFor="let attachment of activity.activity.attachments">
						{{attachment.content.text}}
					</div>
				</div>

				<c-collapse class="c-chat__item-spoiler">
					<pre>{{activity.activity | json}}</pre>
				</c-collapse>
			</div>
		</div>
	</div>
</div>
